<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="" name="description">
    <meta content="" name="author">



    <!--remote libraries e.g. cdn -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	
    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
	
    <!-- Custom CSS -->
    <link href="css/simple-sidebar.css" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ol3/3.6.0/ol.css" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ol3/3.6.0/ol.js"></script>

    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" />

    <script src="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script>

    <link href="../../favicon.ico" rel="icon">

	<style>
	#detailed-table .popover {
	  width:400px !important;
	  
	}
	</style>
    <title class=".visible-md-* .visible-lg-*">Wiley: Navigating the data jungle</title>
</head>

<body>
<!-- top navbar -->
<div class="container">
	</header>
	        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="overview.html">
                        <img src="wiley.png" width="150" height="150">
                    </a>
                </li>
				<br>
				<br>
				<br>
				<br>
                <li>
                    <a href="#"><span class="glyphicon glyphicon-search" style="font-size:2.5em;"></span><font size="6" face="calibri">Search</font></a>
                </li>
                <li>
                    <a href="#"><span class="glyphicon glyphicon-signal" style="font-size:2.5em;"></span><font size="6" face="calibri">Monitor</font></a>
                </li>
            </ul>
        </div>
	
    <div class="container-fluid">
        <div class="row-fluid">
	
	<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#">Install Notes</a></li>
        <li><a href="#">Release Notes</a></li>
        <li><a href="#">Help Files</a></li>
		
      </ul>
    </div>
  </div>
</nav>
	</header>
	        <!-- Sidebar -->
            <!--
    <div class="span2">
	  
        <div class="col-sm-3 col-md-2 ">
          <ul class="nav nav-sidebar">
		  
            <li><a href=""><b>Bookmark Current</b></a></li>
            <li><a href="">Melons Search</a></li>
            <li><a href="">Fave Search 1</a></li>
            <li><a href="">Fave Search 2</a></li>
          </ul>
        </div>
    </div>
	-->
            <div class="span12">
                <!--Body content-->
<!--"col-sm-9  col-md-10main"-->
				<div class = "row">
                <div class="col-sm-4 form-group">
						<form class="form-horizontal">
<fieldset>

<!-- Form Name -->
<legend>Advanced Search</legend>

<!-- Search input-->
<div class="form-group">
		<label class="col-md-4 control-label" for="begindate">Begin Date</label>  
		<div class="col-md-4">
			<input id="begindate" name="begindate" type="text" placeholder="dd/mm/yyyy" class="form-control input-md">
			<!--<span class="help-block">(or dd/mm/yyyy-dd/mm/yyyy)</span>--> 
		</div>
	</div>
	
	<div class="form-group">
		<label class="col-md-4 control-label" for="enddate">End Date</label>  
		<div class="col-md-4">
			<input id="enddate" name="enddate" type="text" placeholder="dd/mm/yyyy" class="form-control input-md">
			<!--<span class="help-block">(or dd/mm/yyyy-dd/mm/yyyy)</span>-->
		</div>
	</div>
	
	<!-- Select Basic -->
	<div class="form-group">
		<label class="col-md-4 control-label" for="selectlocation">Location</label>
		<div class="col-md-4">
			<select id="selectlocation" name="selectlocation" class="form-control">
				<option value="Alabama">Alabama</option>
				<option value="Alaska">Alaska</option>
				<option value="American Samoa">American Samoa</option>
				<option value="Arizona">Arizona</option>
				<option value="Arkansas">Arkansas</option>
				<option value="California">California</option>
				<option value="Colorado">Colorado</option>
				<option value="Connecticut">Connecticut</option>
				<option value="Delaware">Delaware</option>
				<option value="District of Columbia">District of Columbia</option>
				<option value="Florida">Florida</option>
				<option value="Georgia">Georgia</option>
				<option value="Guam">Guam</option>
				<option value="Hawaii">Hawaii</option>
				<option value="Idaho">Idaho</option>
				<option value="Illinois">Illinois</option>
				<option value="Indiana">Indiana</option>
				<option value="Iowa">Iowa</option>
				<option value="Kansas">Kansas</option>
				<option value="Kentucky">Kentucky</option>
				<option value="Louisiana">Louisiana</option>
				<option value="Maine">Maine</option>
				<option value="Maryland">Maryland</option>
				<option value="Massachusetts">Massachusetts</option>
				<option value="Michigan">Michigan</option>
				<option value="Minnesota">Minnesota</option>
				<option value="Mississippi">Mississippi</option>
				<option value="Missouri">Missouri</option>
				<option value="Montana">Montana</option>
				<option value="Nebraska">Nebraska</option>
				<option value="Nevada">Nevada</option>
				<option value="New Hampshire">New Hampshire</option>
				<option value="New Jersey">New Jersey</option>
				<option value="New Mexico">New Mexico</option>
				<option value="New York">New York</option>
				<option value="North Carolina">North Carolina</option>
				<option value="North Dakota">North Dakota</option>
				<option value="Northern Marianas Islands">Northern Marianas Islands</option>
				<option value="Ohio">Ohio</option>
				<option value="Oklahoma">Oklahoma</option>
				<option value="Oregon">Oregon</option>
				<option value="Pennsylvania">Pennsylvania</option>
				<option value="Puerto Rico">Puerto Rico</option>
				<option value="Rhode Island">Rhode Island</option>
				<option value="South Carolina">South Carolina</option>
				<option value="South Dakota">South Dakota</option>
				<option value="Tennessee">Tennessee</option>
				<option value="Texas">Texas</option>
				<option value="Utah">Utah</option>
				<option value="Vermont">Vermont</option>
				<option value="Virginia">Virginia</option>
				<option value="Virgin Islands">Virgin Islands</option>
				<option value="Washington">Washington</option>
				<option value="West Virginia">West Virginia</option>
				<option value="Wisconsin">Wisconsin</option>
				<option value="Wyoming">Wyoming</option>
			</select>
		</div>
	</div>
	
	<!-- Text input-->
	<div class="form-group">
  <label class="col-md-4 control-label" for="searchinput">Keyword (One Field)</label>
					<div class="col-md-4">
						<input id="searchinput" name="searchinput" type="search" placeholder="eg something" class="form-control input-md">
						<!--<p class="help-block">Food Description</p>-->
					</div>
</div>

	<div class="form-group">
		<label class="col-md-4 control-label" for="foodgroup">Food Group</label>  
		<div class="col-md-4">
			<input id="foodgroup" name="foodgroup" type="text" class="form-control input-md">
			<!--<span class="help-block">(or dd/mm/yyyy-dd/mm/yyyy)</span>-->
		</div>
	</div>
	<button id="btnSubmit" type="submit" class="btn btn-default">Submit Search</button>
	<script>
        $(document).ready(function btnClick() {
            //    button click
            $("#btnSubmit").button().click(function() {
                alert("button");
				foodgroup = document.getElementById('foodgroup').value;
				begindate = document.getElementById('begindate').value;
				enddate = document.getElementById('enddate').value;
				selectlocation = document.getElementById('setlocation').value;
				searchinput = document.getElementById('searchinput').value;
				alert(begindate);
				alert(enddate);
				alert(foodgroup);
				alert(searchinput);
				alert(selectlocation);
            });
			//var endpoint = 'https://api.fda.gov/drug/event.json'
			//var params = "?" + elem + ""
            var data = ["foo", "bar"];
            $.get('https://api.fda.gov/drug/event.json?search=patient.drug.openfda.pharm_class_epc:"nonsteroidal+anti-inflammatory+drug"&count=patient.reaction.reactionmeddrapt.exact', function(result) {
                $.each(result.results, function(i, item) {
                    $('#my-table > tbody:last').append('<tr><td>' + item.term + '</td></tr>');
                });
            });
            $.each(data, function(i, item) {
                $('#my-table > tbody:last').append('<tr><td>' + item + '</td></tr>');
            });
        });
		
		$(function () { $("[data-toggle='popover']").popover({
			trigger: 'hover',
			'placement': 'right',
			 html : true, 
		}); });
		
    </script>
	
</fieldset>
						</form>
					
				</div>
				<div class="col-sm-8">
                    <div class="col-xs-6 col-sm-3 img-responsive" style="height:400px;width:100%" id="map">

                    </div>
                </div>
				</div>
                <div class="col-sm-9  col-md-10main">
               



                    <!--PlaceHolder Table-->
                    <h2 class="sub-header">Detailed Report</h2>
                   <!-- <div class="table-responsive">-->
					<!--<div class="container">-->
					
					
					<div id="detailed-table" class="list-group">
					  <div class="list-group-item"  data-toggle="popover" data-placement="right" data-content="Status: Ongoing <br>Product Quantity: 81 containers <br>Recall Initiation Date: July 2014<br>State: ND<br>Event ID: 62644<br>Product Type: Food<br>Product Description: Cass-Clay , Swiss Chip, 3 Gallon(11.34 L).<br>Country: US<br>City: Fargo<br>Recalling Firm: Cass Clay Creamery AMPI Fargo Division<br>Report Date: November 5, 2014<br>Voluntary Mandated: Voluntary: Firm Initiated<br>Classification: Class II<br>Initial Firm Notification: Two or more of the following: Email">
						<h4 class="list-group-item-heading">Cass Clay Creamery AMPI Fargo Division</h4>
						<p class="list-group-item-text">
						<span class="glyphicon glyphicon-calendar" aria-hidden="false"></span><span> Report Date: June 2015</span>
						<span class="glyphicon glyphicon-map-marker" aria-hidden="false"></span><span> Location: MD</span>
						<span class="glyphicon glyphicon-info-sign" aria-hidden="false"></span><span> Food Description: corn</span>
						</p>
					  </div>
					<div class="list-group-item">
						<div data-toggle="collapse" data-parent="#detailed-table" href="#collapse2">
							<h4 class="list-group-item-heading">Pinnacle Food Group LLC</h4>
							<p class="list-group-item-text">
								<span class="glyphicon glyphicon-calendar" aria-hidden="false"></span><span> Report Date: May 2015</span>
								<span class="glyphicon glyphicon-map-marker" aria-hidden="false"></span><span> Location: MD</span>
								<span class="glyphicon glyphicon-info-sign" aria-hidden="false"></span><span> Food Description: Ranch Dressing</span>
							</p>
						</div>
					
						<div id="collapse2" class="panel-collapse collapse">
							<div class="panel-body">
							<ul class="list-unstyled">
								<li>Status: Ongoing</li>
								<li>Product Quantity: 81 containers</li>
								<li>Recall Initiation Date: July 2015</li>
								<li>State: ND</li>
								<li>Event ID: 62644</li>
								<li>Product Type: Food</li> 
								<li>Product Description: Cass-Clay , Swiss Chip, 3 Gallon(11.34 L).</li>
								<li>Country: US</li>
								<li>City: Fargo</li>
								<li>Recalling Firm: Cass Clay Creamery AMPI Fargo Division</li>
								<li>Report Date: August 2015</li>
								<li>Voluntary Mandated: Voluntary: Firm Initiated</li>
								<li>Classification: Class II</li>
								<li>Initial Firm Notification: Two or more of the following: Email</li>
							</ul>
							</div>
						</div>
					
					  </div>
					<div class="list-group-item">
						<h4 class="list-group-item-heading">Vitamin Cottage Natural Food Markets Inc.</h4>
						<p class="list-group-item-text">
							<span class="glyphicon glyphicon-calendar" aria-hidden="false"></span><span> Report Date: January 2014</span>
							<span class="glyphicon glyphicon-map-marker" aria-hidden="false"></span><span> Location: MI</span>
							<span class="glyphicon glyphicon-info-sign" aria-hidden="false"></span><span> Food Description: Raw macadamia nuts</span>
						</p>
					  </div>
					<div class="list-group-item">
						<h4 class="list-group-item-heading">Waymouth Farms, Inc.</h4>
						<p class="list-group-item-text">
							<span class="glyphicon glyphicon-calendar" aria-hidden="false"></span><span> Report Date: February 2015</span>
							<span class="glyphicon glyphicon-map-marker" aria-hidden="false"></span><span> Location: CA</span>
							<span class="glyphicon glyphicon-info-sign" aria-hidden="false"></span><span> Food Description: Raw Pine Nuts</span>
						</p>
					  </div>
					  
					<div class="list-group-item">
						<h4 class="list-group-item-heading">Golden Krust Caribbean Bakery & Grill</h4>
						<p class="list-group-item-text">
							<span class="glyphicon glyphicon-calendar" aria-hidden="false"></span><span> Report Date: March 2015</span>
							<span class="glyphicon glyphicon-map-marker" aria-hidden="false"></span><span> Location: NE</span>
							<span class="glyphicon glyphicon-info-sign" aria-hidden="false"></span><span> Food Description: Shrimp Patties, Soya Patties</span>
						</p>
					  </div>				  
					<div class="list-group-item">
						<h4 class="list-group-item-heading">Good Seed Inc.</h4>
						<p class="list-group-item-text">
<span class="glyphicon glyphicon-calendar" aria-hidden="false"></span><span> Report Date: January 2015</span>
							<span class="glyphicon glyphicon-map-marker" aria-hidden="false"></span><span> Location: MI</span>
							<span class="glyphicon glyphicon-info-sign" aria-hidden="false"></span><span> Food Description: GOODSEED Soy Bean Sprouts and GOODSEED Soy Bean Sprouts  </span>
						</p>
					  </div> 
					</div>
                </div>

            </div>

        </div>
    </div>
			
		</div>
	</div>
	</div>
    <!---this is for search functionality-->
    <script>
        $(document).ready(function btnClick() {
            //    button click
            $("#btnSubmit").button().click(function() {
                alert("button");
            });
            var data = ["foo", "bar"];
            $.get('https://api.fda.gov/drug/event.json?search=patient.drug.openfda.pharm_class_epc:"nonsteroidal+anti-inflammatory+drug"&count=patient.reaction.reactionmeddrapt.exact', function(result) {
                $.each(result.results, function(i, item) {
                    $('#my-table > tbody:last').append('<tr><td>' + item.term + '</td></tr>');
                });
            });
            $.each(data, function(i, item) {
                $('#my-table > tbody:last').append('<tr><td>' + item + '</td></tr>');
            });
        });
		
		$(function () { $("[data-toggle='popover']").popover({
			trigger: 'hover',
			'placement': 'right',
			 html : true, 
		}); });
		
    </script>



    </script>

    <script>
			var map = L.map('map').setView([31.0, -98.0], 10);

		
		
        window.pizzaIcon = L.icon({
			iconUrl: 'ic_local_pizza_black_48dp.png',
			
			iconSize:     [48, 48], // size of the icon
			iconAnchor:   [22, 22], // point of the icon which will correspond to marker's location
			popupAnchor:  [0, -22] // point from which the popup should open relative to the iconAnchor
		});
		
		
        L.tileLayer('https://{s}.tiles.mapbox.com/v3/{id}/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
                '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                'Imagery © <a href="http://mapbox.com">Mapbox</a>',
            id: 'examples.map-i875mjb7'
        }).addTo(map);


        L.marker([51.5, -0.09]).addTo(map)

        L.circle([51.508, -0.11], 500, {
            color: 'red',
            fillColor: '#f03',
            fillOpacity: 0.5
        }).addTo(map).bindPopup("I am a circle.");

        L.polygon([
            [51.509, -0.08],
            [51.503, -0.06],
            [51.51, -0.047]
        ]).addTo(map).bindPopup("I am a polygon man.");


        var popup = L.popup();

        function onMapClick(e) {

            getVector();

            popup
                .setLatLng(e.latlng)
                .setContent("You clicked the map at " + e.latlng.toString())
                .openOn(map);
        }
		
		
        //Query Claven for lat/longs ... 
        function getVector() {
            //alert($("#id_textarea").val());
            //console.log($("#id_textarea").val());
            $.ajax({
                    url: "http://localhost:9090/api/v0/geotag",
                    type: "POST",
                    contentType: "text/plain",
                    data: "Texas, US"
                })
                //data: $("#id_textarea").val()
                .done(function(data) {
                    //console.log(data);
                    $("#results").text(JSON.stringify(data));

                    // add results to map
                    var bounds = [];
                    $.each(data.resolvedLocations, (function(idx, val) {
                        //console.log(val);
                        bounds.push([val.geoname.latitude, val.geoname.longitude]);
                        L.marker([val.geoname.latitude, val.geoname.longitude], {icon: window.pizzaIcon}).addTo(map)
                            .bindPopup(val.geoname.name);
                    }));

                    // zoom to bounds of markers
                    map.fitBounds(bounds);

                });
        }
		
		
		
		
        map.on('click', onMapClick);
    </script>
	
    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>
	
    <!-- Menu Toggle Script -->
    <script>
		$("#menu-toggle").click(function(e) {
			e.preventDefault();
			$("#wrapper").toggleClass("toggled");
		});
    </script>

</body>





<!-----Test of D3 Integration 

<style>

body {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  margin: auto;
  position: relative;
  width: 960px;
}

button {
  position: absolute;
  right: 10px;
  top: 10px;
}



</style>------>
<script src="http://d3js.org/d3.v3.min.js"></script>


<script src="classification_chart.js"></script>
<script src="product_chart.js"></script>
<script src="recall_status_chart.js"></script>
<script src="horizontal_barchart.js"></script>


</html>