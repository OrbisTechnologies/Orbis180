<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="" name="description">
    <meta content="" name="author">



    <!--remote libraries e.g. cdn -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" />

    <script src="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script>

    <link href="../../favicon.ico" rel="icon">

    <title class=".visible-md-* .visible-lg-*">Wiley: Navigating the data jungle</title>
    <!-- Custom styles -->
    <link href="dashboard.css" rel="stylesheet">
</head>

<body>

    <div class="navbar  navbar-fixed-top  navbar-inverse  navbar-static-top ">test</div>
    <nav class="navbar navbar-fixed-top navbar-inverse nav-stacked">

        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">Wiley</a>
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-left">
                    <li><a href="#">Monitor</a></li>
                    <li><a href="#">Search</a></li>
                    <li><a href="#">Help</a></li>
                </ul>
                <form class="navbar-form navbar-right">
                    <input class="form-control" placeholder="Search..." type="text">
                    <button type="button" class="btn btn-default" aria-label="Left Align" id="btnSubmit">
                        <span class="glyphicon glyphicon-align-left" aria-hidden="true">Submit</span>
                    </button>
                </form>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row-fluid">
            <!--
    <div class="span2">
	  
        <div class="col-sm-3 col-md-2 ">
          <ul class="nav nav-sidebar">
		  
            <li><a href=""><b>Bookmark Current</b></a></li>
            <li><a href="">Melons Search</a></li>
            <li><a href="">Fave Search 1</a></li>
            <li><a href="">Fave Search 2</a></li>
          </ul>
        </div>
    </div>
	-->
            <div class="span10">
                <!--Body content-->

                <div class="col-sm-9  col-md-10main">
                    <h1 class="page-header">Results</h1>

                    <div class="col-xs-6 col-sm-3 img-responsive" style="height:400px;width:100%" id="map">

                    </div>
                </div>
                <div class="col-sm-9  col-md-10main">
                    <h3 class="page-header">Summary</h3>

                    <div class="row placeholders">
                        <div class="col-xs-6 col-sm-3 placeholder" id="easy-as-pie-chart">

                            <h4>Frequency</h4>
                        </div>
                        <!---         <div class="col-xs-6 col-sm-3 placeholder"   id="btnSubmit">-->

                        <div class="col-xs-6 col-sm-3 placeholder" id="classchart">
                            <h4>Other Thing</h4>
                        </div>
                        <div class="col-xs-6 col-sm-3 placeholder">
                            <h4>Label</h4>
                            <span class="text-muted">Something else</span>
                        </div>
                        <div class="col-xs-6 col-sm-3 placeholder">
                            <h4>Label</h4>
                            <span class="text-muted">Something else</span>
                        </div>
                    </div>




                    <!--PlaceHolder Table-->
                    <h2 class="sub-header">Detailed Report</h2>
                    <div class="table-responsive">
                        <table class="table table-striped" id="my-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Header</th>
                                    <th>Header</th>
                                    <th>Header</th>
                                    <th>Header</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1,001</td>
                                    <td>Lorem</td>
                                    <td>ipsum</td>
                                    <td>dolor</td>
                                    <td>sit</td>
                                </tr>
                                <tr>
                                    <td>1,002</td>
                                    <td>amet</td>
                                    <td>consectetur</td>
                                    <td>adipiscing</td>
                                    <td>elit</td>
                                </tr>
                                <tr>
                                    <td>1,003</td>
                                    <td>Integer</td>
                                    <td>nec</td>
                                    <td>odio</td>
                                    <td>Praesent</td>
                                </tr>
                                <tr>
                                    <td>1,003</td>
                                    <td>libero</td>
                                    <td>Sed</td>
                                    <td>cursus</td>
                                    <td>ante</td>
                                </tr>
                                <tr>
                                    <td>1,004</td>
                                    <td>dapibus</td>
                                    <td>diam</td>
                                    <td>Sed</td>
                                    <td>nisi</td>
                                </tr>
                                <tr>
                                    <td>1,005</td>
                                    <td>Nulla</td>
                                    <td>quis</td>
                                    <td>sem</td>
                                    <td>at</td>
                                </tr>
                                <tr>
                                    <td>1,006</td>
                                    <td>nibh</td>
                                    <td>elementum</td>
                                    <td>imperdiet</td>
                                    <td>Duis</td>
                                </tr>
                                <tr>
                                    <td>1,007</td>
                                    <td>sagittis</td>
                                    <td>ipsum</td>
                                    <td>Praesent</td>
                                    <td>mauris</td>
                                </tr>
                                <tr>
                                    <td>1,008</td>
                                    <td>Fusce</td>
                                    <td>nec</td>
                                    <td>tellus</td>
                                    <td>sed</td>
                                </tr>
                                <tr>
                                    <td>1,009</td>
                                    <td>augue</td>
                                    <td>semper</td>
                                    <td>porta</td>
                                    <td>Mauris</td>
                                </tr>
                                <tr>
                                    <td>1,010</td>
                                    <td>massa</td>
                                    <td>Vestibulum</td>
                                    <td>lacinia</td>
                                    <td>arcu</td>
                                </tr>
                                <tr>
                                    <td>1,011</td>
                                    <td>eget</td>
                                    <td>nulla</td>
                                    <td>Class</td>
                                    <td>aptent</td>
                                </tr>
                                <tr>
                                    <td>1,012</td>
                                    <td>taciti</td>
                                    <td>sociosqu</td>
                                    <td>ad</td>
                                    <td>litora</td>
                                </tr>
                                <tr>
                                    <td>1,013</td>
                                    <td>torquent</td>
                                    <td>per</td>
                                    <td>conubia</td>
                                    <td>nostra</td>
                                </tr>
                                <tr>
                                    <td>1,014</td>
                                    <td>per</td>
                                    <td>inceptos</td>
                                    <td>himenaeos</td>
                                    <td>Curabitur</td>
                                </tr>
                                <tr>
                                    <td>1,015</td>
                                    <td>sodales</td>
                                    <td>ligula</td>
                                    <td>in</td>
                                    <td>libero</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>

        </div>
    </div>
    <!---this is for search functionality-->
    <script>
        $(document).ready(function btnClick() {
            //    button click
            $("#btnSubmit").button().click(function() {
                alert("button");
            });
            var data = ["foo", "bar"];
            $.get('https://api.fda.gov/drug/event.json?search=patient.drug.openfda.pharm_class_epc:"nonsteroidal+anti-inflammatory+drug"&count=patient.reaction.reactionmeddrapt.exact', function(result) {
                $.each(result.results, function(i, item) {
                    $('#my-table > tbody:last').append('<tr><td>' + item.term + '</td></tr>');
                });
            });
            $.each(data, function(i, item) {
                $('#my-table > tbody:last').append('<tr><td>' + item + '</td></tr>');
            });
        });
    </script>



    </script>

    <script>
        var map = L.map('map').setView([31.0, -98.0], 10);

        L.tileLayer('https://{s}.tiles.mapbox.com/v3/{id}/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
                '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                'Imagery © <a href="http://mapbox.com">Mapbox</a>',
            id: 'examples.map-i875mjb7'
        }).addTo(map);


        L.marker([51.5, -0.09]).addTo(map)

        L.circle([51.508, -0.11], 500, {
            color: 'red',
            fillColor: '#f03',
            fillOpacity: 0.5
        }).addTo(map).bindPopup("I am a circle.");

        L.polygon([
            [51.509, -0.08],
            [51.503, -0.06],
            [51.51, -0.047]
        ]).addTo(map).bindPopup("I am a polygon man.");


        var popup = L.popup();

        function onMapClick(e) {

            getVector();

            popup
                .setLatLng(e.latlng)
                .setContent("You clicked the map at " + e.latlng.toString())
                .openOn(map);
        }

        //Query Claven for lat/longs ... 
        function getVector() {
            //alert($("#id_textarea").val());
            //console.log($("#id_textarea").val());
            $.ajax({
                    url: "http://localhost:9090/api/v0/geotag",
                    type: "POST",
                    contentType: "text/plain",
                    data: "Texas, US"
                })
                //data: $("#id_textarea").val()
                .done(function(data) {
                    //console.log(data);
                    $("#results").text(JSON.stringify(data));

                    // add results to map
                    var bounds = [];
                    $.each(data.resolvedLocations, (function(idx, val) {
                        //console.log(val);
                        bounds.push([val.geoname.latitude, val.geoname.longitude]);
                        L.marker([val.geoname.latitude, val.geoname.longitude]).addTo(map)
                            .bindPopup(val.geoname.name);
                    }));

                    // zoom to bounds of markers
                    map.fitBounds(bounds);

                });
        }
        map.on('click', onMapClick);
    </script>


</body>





<!-----Test of D3 Integration 

<style>

body {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  margin: auto;
  position: relative;
  width: 960px;
}

button {
  position: absolute;
  right: 10px;
  top: 10px;
}



</style>------>
<script src="http://d3js.org/d3.v3.min.js"></script>


<script src="classification_chart.js"></script>
<script src="product_chart.js"></script>
<script src="recall_status_chart.js"></script>
<script src="horizontal_barchart.js"></script>


</html>